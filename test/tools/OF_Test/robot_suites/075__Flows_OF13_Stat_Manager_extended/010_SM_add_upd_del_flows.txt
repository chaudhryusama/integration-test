*** Settings ***
Documentation     Test suite for Stats Manager flows collection
Library        OperatingSystem
Library        Collections
Library        XML
Library        SSHLibrary
Library        ../../../../csit/libraries/XmlComparator.py
Variables      ../../../../csit/variables/Variables.py
Library        ../../../../csit/libraries/RequestsLibrary.py
Library        ../../../../csit/libraries/Common.py
Suite Setup       Initialization Phase
Suite Teardown    Teardown Phase


*** Variables ***
${XmlsDir}=       ${CURDIR}/../../../../csit/variables/xmls
${switch_idx}=    1
${switch_name}=   s${switch_idx}
@{flowlist0}=     f1.xml  f2.xml  f3.xml  f4.xml  f5.xml  f6.xml  f7.xml  f8.xml  f9.xml  f10.xml  f11.xml  f12.xml  f13.xml  f14.xml  f15.xml  f16.xml  f17.xml  f18.xml  f19.xml  f20.xml  f21.xml  f22.xml  f23.xml  f24.xml  f25.xml  f31.xml  f36.xml  f38.xml  f43.xml  f45.xml  f47.xml  f101.xml  f102.xml  f103.xml  f104.xml  f105.xml  f106.xml  f107.xml  f108.xml  f109.xml  f110.xml  f113.xml  f156.xml  f201.xml  f202.xml  f203.xml  f204.xml  f205.xml  f206.xml  f209.xml  f214.xml  f218.xml  f219.xml  f220.xml


*** Test Cases ***
Test Add Flows Group 0
   [Documentation]    Add all flows and waits for SM to collect data
     :FOR   ${flowfile}   IN   @{flowlist0}
     \       Log   ${flowfile}
     \       Init Flow Variables  ${flowfile}
     \       Run Keyword And Continue On Failure   Add Flow
     Sleep  30s
     Write    dpctl dump-flows -O OpenFlow13
     Sleep  1s
     ${switchouput}    Read
     Log     ${switchouput}
Test Is Flow 1 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f1.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 2 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f2.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 3 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f3.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 4 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f4.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 5 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f5.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 6 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f6.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 7 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f7.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 8 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f8.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 9 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f9.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 10 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f10.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 11 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f11.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 12 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f12.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 13 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f13.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 14 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f14.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 15 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f15.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 16 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f16.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 17 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f17.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 18 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f18.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 19 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f19.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 20 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f20.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 21 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f21.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 22 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f22.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 23 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f23.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 24 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f24.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 25 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f25.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 31 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f31.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 36 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f36.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 38 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f38.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 43 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f43.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 45 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f45.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 47 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f47.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 101 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f101.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 102 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f102.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 103 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f103.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 104 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f104.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 105 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f105.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 106 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f106.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 107 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f107.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 108 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f108.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 109 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f109.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 110 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f110.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 113 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f113.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 156 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f156.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 201 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f201.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 202 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f202.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 203 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f203.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 204 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f204.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 205 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f205.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 206 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f206.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 209 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f209.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 214 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f214.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 218 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f218.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 219 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f219.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Is Flow 220 Added
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f220.xml
      Check Config Flow         ${True}   ${data}
      Check Operational Table   ${True}   ${data}
Test Update Flows Group 0
   [Documentation]    Update all flows and waits for SM to collect data
     :FOR   ${flowfile}   IN   @{flowlist0}
     \       Log   ${flowfile}
     \       Init Flow Variables  ${flowfile}
     \       Run Keyword And Continue On Failure   Update Flow
     Sleep  40s
     Write    dpctl dump-flows -O OpenFlow13
     Sleep  1s
     ${switchouput}    Read
     Log     ${switchouput}
Test Is Flow 1 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f1.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 2 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f2.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 3 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f3.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 4 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f4.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 5 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f5.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 6 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f6.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 7 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f7.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 8 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f8.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 9 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f9.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 10 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f10.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 11 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f11.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 12 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f12.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 13 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f13.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 14 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f14.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 15 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f15.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 16 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f16.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 17 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f17.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 18 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f18.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 19 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f19.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 20 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f20.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 21 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f21.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 22 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f22.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 23 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f23.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 24 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f24.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 25 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f25.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 31 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f31.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 36 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f36.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 38 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f38.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 43 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f43.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 45 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f45.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 47 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f47.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 101 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f101.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 102 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f102.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 103 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f103.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 104 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f104.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 105 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f105.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 106 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f106.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 107 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f107.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 108 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f108.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 109 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f109.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 110 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f110.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 113 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f113.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 156 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f156.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 201 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f201.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 202 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f202.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 203 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f203.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 204 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f204.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 205 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f205.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 206 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f206.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 209 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f209.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 214 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f214.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 218 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f218.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 219 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f219.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Is Flow 220 Updated
    [Documentation]    Checks if flow is configured and operational
      Init Flow Variables       f220.xml
      Check Config Flow         ${True}   ${upddata}
      Check Operational Table   ${True}   ${upddata}
Test Delete Flows Group 0
   [Documentation]    Delete all flows and waits for SM to collect data
     :FOR   ${flowfile}   IN   @{flowlist0}
     \       Log   ${flowfile}
     \       Init Flow Variables   ${flowfile}
     \       Run Keyword And Continue On Failure   Delete Flow
     Sleep  40s
     Write    dpctl dump-flows -O OpenFlow13
     Sleep  1s
     ${switchouput}    Read
     Log     ${switchouput}
Test Is Flow 1 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f1.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 2 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f2.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 3 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f3.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 4 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f4.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 5 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f5.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 6 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f6.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 7 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f7.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 8 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f8.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 9 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f9.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 10 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f10.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 11 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f11.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 12 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f12.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 13 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f13.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 14 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f14.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 15 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f15.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 16 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f16.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 17 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f17.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 18 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f18.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 19 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f19.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 20 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f20.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 21 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f21.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 22 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f22.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 23 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f23.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 24 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f24.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 25 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f25.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 31 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f31.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 36 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f36.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 38 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f38.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 43 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f43.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 45 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f45.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 47 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f47.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 101 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f101.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 102 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f102.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 103 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f103.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 104 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f104.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 105 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f105.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 106 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f106.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 107 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f107.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 108 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f108.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 109 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f109.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 110 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f110.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 113 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f113.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 156 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f156.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 201 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f201.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 202 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f202.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 203 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f203.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 204 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f204.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 205 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f205.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 206 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f206.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 209 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f209.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 214 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f214.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 218 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f218.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 219 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f219.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}
Test Is Flow 220 Deleted
    [Documentation]    Checks if flow is not configured and operational 
      Init Flow Variables       f220.xml
      Check Config Flow         ${False}   ${upddata}
      Check Operational Table   ${False}   ${upddata}


*** Keywords ***
Init Flow Variables   [Arguments]   ${file}
      ${data}=       OperatingSystem.Get File     ${XmlsDir}/${file}
      ${xmlroot}=    Parse Xml    ${XmlsDir}/${file}
      ${table_id}=   Get Element Text   ${xmlroot}   table_id
      ${flow_id}=    Get Element Text   ${xmlroot}   id
      ${flow_priority}=    Get Element Text   ${xmlroot}   priority
      ${upddata}=    Get Data For Flow Put Update   ${data}
      Set Suite Variable   ${table_id}
      Set Suite Variable   ${flow_id}
      Set Suite Variable   ${flow_priority}
      Set Suite Variable   ${data}
      Set Suite Variable   ${upddata}
      Set Suite Variable   ${xmlroot}
Check Config Flow   [Arguments]   ${expected}   ${expvalue}
         ${presence_flow}   ${msg}=      Flow Presence Config Flow    ${expvalue}
         ${msgf}=   Get Presence Failure Message    config    ${expected}    ${presence_flow}   ${msg} 
         Should Be Equal    ${expected}  ${presence_flow}   msg=${msgf}
Flow Presence Config Flow  [Arguments]   ${expvalue}
         ${headers}=      Create Dictionary   Accept   application/xml
         ${resp}=   Get  session  /restconf/config/opendaylight-inventory:nodes/node/openflow:${switch_idx}/table/${table_id}/flow/${flow_id}   headers=${headers}
         Log  ${resp}
         Log  ${resp.content}
         Return From Keyword If   ${resp.status_code}!=200  ${False}   ${EMPTY}
         ${pres}  ${msg}=  Is Flow Configured  ${expvalue}   ${resp.content}
         Run Keyword If   '''${msg}'''!='${EMPTY}'   Log   ${msg}
         Return From Keyword   ${pres}   ${msg}
Check Operational Table  [Arguments]   ${expected}    ${expvalue}
         ${presence_table}  ${msg}=  Flow Presence Operational Table   ${expvalue}
         ${msgf}=   Get Presence Failure Message    operational    ${expected}    ${presence_table}   ${msg} 
         Should Be Equal  ${expected}  ${presence_table}  msg=${msgf}
Flow Presence Operational Table   [Arguments]  ${expvalue}
         ${headers}=      Create Dictionary   Accept   application/xml
         ${resp}=   Get   session   /restconf/operational/opendaylight-inventory:nodes/node/openflow:${switch_idx}/table/${table_id}    headers=${headers}
         Log   ${resp}
         Log   ${resp.content}
         Return From Keyword If    ${resp.status_code}!=200   ${False}   ${EMPTY}
         ${pres}   ${msg}=   Is Flow Operational2   ${expvalue}   ${resp.content}
         Run Keyword If   '''${msg}'''!='${EMPTY}'   Log   ${msg}
         Return From Keyword   ${pres}   ${msg}
Delete All Flows
   [Documentation]    Deletes all flows
     :FOR   ${flowfile}   IN   @{flowlist0}
     \       Log   ${flowfile}
     \       Init Flow Variables   ${flowfile}
     \       Delete Flow
Initialization Phase
  [Documentation]   Initiate tcp connection with controller
     Create Session   session   http://${CONTROLLER}:${PORT}   auth=${AUTH}   headers=${HEADERS_XML}
     Write    dpctl dump-flows -O OpenFlow13
     Sleep  1s
     ${switchouput}    Read
     Log     ${switchouput}
Teardown Phase
  [Documentation]   Closes tcp connection with controller and removes flows
     Delete All Sessions
Get Presence Failure Message   [Arguments]   ${ds}   ${expected}   ${presence}  ${diffmsg}
         Return From Keyword If   '''${diffmsg}'''!='${EMPTY}'  Flow found in ${ds} data store but: ${diffmsg}
         ${msgf}=   Set Variable If   ${expected}==${True}   The flow is expected in ${ds} data store, but   The flow is not expected in ${ds} data store, but
         ${msgp}=   Set Variable If   ${presence}==${True}   it is present.   it is not present.
         Return From Keyword   ${msgf} ${msgp}
Add Flow
      Log             ${data}
      ${resp}=        Post    session   /restconf/config/opendaylight-inventory:nodes/node/openflow:${switch_idx}/table/${table_id}   data=${data}
      Log             ${resp.content}
      ${msg}=  Set Variable   Adding flow for /restconf/config/opendaylight-inventory:nodes/node/openflow:${switch_idx}/table/${table_id}/flow/${flow_id} failed, http response ${resp.status_code} received.
      Should Be Equal As Strings   ${resp.status_code}   204   msg=${msg}
Update Flow
       Log          ${upddata}
       ${resp}=     Putxml    session  /restconf/config/opendaylight-inventory:nodes/node/openflow:${switch_idx}/table/${table_id}/flow/${flow_id}  data=${upddata}
       Log             ${resp.content}
       ${msg}=  Set Variable   Updating flow for /restconf/config/opendaylight-inventory:nodes/node/openflow:${switch_idx}/table/${table_id}/flow/${flow_id} failed, http response ${resp.status_code} received.
       Should Be Equal As Strings  ${resp.status_code}   200    msg=${msg}
Delete Flow
      ${resp}=  Delete   session   /restconf/config/opendaylight-inventory:nodes/node/openflow:${switch_idx}/table/${table_id}/flow/${flow_id}
      Log             ${resp.content}
      ${msg}=  Set Variable  Delete flow for /restconf/config/opendaylight-inventory:nodes/node/openflow:${switch_idx}/table/${table_id}/flow/${flow_id} failed, http response ${resp.status_code} received.
      Should Be Equal As Strings   ${resp.status_code}   200   msg=${msg}
